# Exponential Backoff Package

Пакет реализует алгоритм экспоненциальной задержки с джиттером для повторных попыток (retry).

## Установка

```bash
go get github.com/alfzs/backoff
```

````

## Использование

```go
import (
	"fmt"
	"time"
	"github.com/alfzs/backoff"
)

func main() {
	for attempt := 1; attempt <= 5; attempt++ {
		delay := backoff.CalculateExponentialBackoff(
			attempt,
			100*time.Millisecond, // минимальная задержка
			10*time.Second,      // максимальная задержка
		)

		fmt.Printf("Attempt %d, waiting %v\n", attempt, delay)
		time.Sleep(delay)

		// Здесь ваша логика с возможным retry
	}
}
```

## Особенности алгоритма

1. **Экспоненциальный рост**: задержка увеличивается как `base * 2^(attempt-1)`
2. **Джиттер**: добавляется случайная вариация (от 0.5x до 1.5x от вычисленной задержки)
3. **Ограничение**: задержка не превысит указанный `maxDelay`

Пример вычислений для `minDelay = 100ms`, `maxDelay = 1s`:

| Attempt | Base Delay | With Jitter (пример)  |
| ------- | ---------- | --------------------- |
| 1       | 100ms      | 85ms                  |
| 2       | 200ms      | 310ms                 |
| 3       | 400ms      | 380ms                 |
| 4       | 800ms      | 1.1s (обрезано до 1s) |
| 5       | 1s         | 1.2s (обрезано до 1s) |

## Рекомендации

- Начинайте нумерацию попыток с 1
- Выбирайте `minDelay` в соответствии с вашим SLA
- Устанавливайте `maxDelay` для предотвращения слишком больших задержек
- Всегда добавляйте максимальное количество попыток

## Лицензия

MIT

```

Этот пакет:
1. Имеет минимальную зависимость (только стандартная библиотека)
2. Четко документирован
3. Содержит пример использования
4. Включает пояснение алгоритма
5. Дает рекомендации по настройке параметров

Для использования в других проектах достаточно импортировать пакет и вызывать `CalculateExponentialBackoff()` с нужными параметрами.
```
````
